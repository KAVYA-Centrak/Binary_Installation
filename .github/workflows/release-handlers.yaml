name: Release Handler

on:
  workflow_dispatch:   # ðŸ‘ˆ allows manual run
    inputs:
      zip_name:
        description: "Name of the release ZIP file (example: CORESERVER-5.15.12.1.2-SP.zip)"
        required: true
        type: string

jobs:
  handle-release:
    runs-on: self-hosted   # ðŸ‘ˆ runs on your Windows runner
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Copy ZIP to target folder
        run: |
          echo "Copying ${{ github.event.inputs.zip_name }} to local folder..."
          copy "C:\my-repo\binary_Installation\${{ github.event.inputs.zip_name }}" "C:\ReleaseFolder\"

      - name: Run Python install script
        run: |
          echo "Running installation script..."
          python C:\CenTrak\Framework\Framework\MM_Badge\Core_Server_Installation\run_and_upload.py "D:\ReleaseFolder\${{ github.event.inputs.zip_name }}"
